{% extends 'base.html.twig' %}

{% block meta_description %}
    Créez des itinéraires personnalisés selon vos préférences et compagnons de voyage. Découvrez les lieux qui vous correspondent en Alsace avec AlsaceGo
{% endblock %}


{% block title %}AlsaceGo | Créez Vos Itinéraires Personnalisés{% endblock %}

{% block body %}
    {% block stylesheets %}
       <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    {% endblock %}

    <main id="main">
        <!-- =========================== PRESENTATION  =========================== -->
    <div class="main-picture-bcg">
        <section id="presentation">
                <figure class="flying-stork">
                    <img src="img-source/flying-stork.webp" alt="Icône représentant une cigogne en vol">
                </figure>
                <div class="presentation">
                    <h1>Visitez l'Alsace<br>
                        <div class="span-container-title">
                            <span>autrement</span>
                        </div>
                    </h1>
                    {# <p>
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Dignissimos, praesentium corrupti? Quisquam atque sint amet repellat!
                    </p> #}
                    
                    <a href="#choice" class="home-btn discover" aria-label="Découvrir : accéder au formulaire permettant de sélectionner un thème et un compagnon de voyage">Découvrir</a>

                    <p><i class="fa-solid fa-chevron-down"></i></p>
                </div>
            
        </section>
    </div>
       <!-- =========================== HOW IT WORKS SECTION =========================== -->
        <div class="bcg-how-it-works">
            {# <div id="scrolling-section"> #}
            
            <section id="how-it-works" class="scrolling-section" >
                <h2>Comment ça fonctionne ?</h2>
                {# <div class="horizontal-scroll-container"> #}
                    <!-- =============== step 1 : choose theme =============== -->
                    <article class="scroll-article" id="article1" >
                      
                        <div class="side-illustration-theme">
                        <!-- left side : illustration of the theme choice process -->
                            <figure>
                                <img src="img-source/choice-theme-white.webp" alt="Description illustration étape 1">
                            </figure>
                        </div>
                        <!-- right side : explanation -->
                        <div class="right-block">
                            {# <figure class="arrow-icon">
                                <img src="img-source/straight-arrow.webp" alt="Icone représentant une flèche rouge pointée vers le bas">
                            </figure> #}
                            <h3><span>1.</span>Choisissez un thème</h3>
                            <figure class="looking-down">
                                <img src="img-source/looking-straight-stork.webp" alt="Illustration représentant une cigogne regardant en bas">
                            </figure>
                            <!-- small text explanation-->
                            {# <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Itaque, aperiam.</p> #}
                            <!-- link that leads to the choice theme  -->
                            {# <a href="#choice" aria-label="Renvoie au formulaire initial en haut de page">Découvrir mon itinéraire</a> #}
                        </div>
                    </article>
                    <!-- =============== step 2 : choose companion / with who? =============== -->
                    <article class="scroll-article" id="article2">
                        <!-- left side : explanation -->
                        <div class="right-block">
                            {# <figure class="arrow-icon">
                                <img src="img-source/straight-arrow.webp" alt="Icone représentant une flèche rouge pointée vers le bas">
                            </figure> #}
                            <h3><span>2.</span>Choisissez avec qui vous voyagez</h3>
                            <figure class="standing-stork-up">
                                    <img src="img-source/stork-looking-up.webp" alt="Illustration représentant une cigogne regardant en l'air">
                            </figure>
                            <!-- small text explanation-->
                            {# <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Itaque, aperiam.</p> #}
                            <!-- link that leads to the choice theme  -->
                            {# <a href="#choice" aria-label="Renvoie au formulaire initial en haut de page">Découvrir mon itinéraire</a> #}
                        </div>
                        <!-- right side : illustration of the 'with who?' choice process -->
                        <div class="side-illustration-companion">
                            <!-- left side : illustration of the theme choice process -->
                            <figure>
                                <img src="img-source/choice-companion-white.webp" alt="Description illustration étape 2">
                            </figure>
                        </div>
                    </article>
                    <!-- =============== step 3 : discover the map with personalized itinerary =================== -->
                    <article class="scroll-article" id="article3">
                        <div class="side-illustration-itinerary ">
                            <!-- left side : illustration of the theme choice process -->
                            <figure>
                                <img src="img-source/itinerary-green1.webp" alt="">
                            </figure>
                        </div>
                        <!-- right side : explanation -->
                        <div class="right-block">
                            {# <figure class="arrow-icon">
                                <img src="img-source/loop-arrow.webp" alt="Icone représentant une flèche rouge, bouclée,  vers le bas">
                            </figure> #}
                            <h3><span>3.</span>Découvrez les lieux qui vous correspondent</h3>
                            <!-- small text explanation-->
                            {# <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Itaque, aperiam.</p> #}
                            <!-- link that leads to the choice theme  -->
                            {# <a href="#choice" aria-label="Renvoie au formulaire initial en haut de page">Découvrir mon itinéraire</a> #}
                        </div>
                    </article>
                {# </div> #}
            </section>
            {# </div> #}
        </div>
        <!-- =========================== SELECT THEME / COMPANION  =========================== -->
        <div class="bcg-choice">
            {# <figure>
                <img src="img-source/vignes-community.webp">
            </figure> #}
            <section id="choice">
                <form method="POST" enctype="application/x-www-form-urlencoded">
                    <h2>Choisissez le <span>thème</span> de votre séjour</h2>
                    <div class="choice-theme-container">
                        {% for theme in themes %}
                            <input type="radio"
                                id="themes_{{ theme.id }}"
                                name="themes"
                                required="required"
                                value="{{ theme.id }}">
                            <label for="themes_{{ theme.id }}">
                                <figure>
                                    <img src="{{ asset('img-source/' ~ theme.name ~ '.webp') }}" alt="Illustration représentant le thème {{ theme.name }}">
                                </figure>
                            </label>
                        {% endfor %}
                    </div>
                    <div class="choice-companion-container">
                        <h2>Vous voyagez ... </h2>
                        <div class="swiper">
                            <div class="swiper-wrapper" space-between="10">
                                {% for companion in companions %}
                                    <div class="swiper-slide">
                                        <input type="radio"
                                            id="companions_{{ companion.id }}"
                                            name="companions"
                                            required="required"
                                            value="{{ companion.id }}">
                                        <label for="companions_{{ companion.id }}">
                                            <figure>
                                                <img src="{{ asset('img-source/' ~ companion.name ~ '.webp') }}" alt="Illusration représentant le choix {{ companion.name }}">
                                            </figure>
                                        </label>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="home-btn">C'est parti !</button>
                </form>
            </section>
        </div>
     
        <!-- =========================== JOIN COMMUNITY SECTION =========================== -->
        <div class="bcg-join-community">
            
            <section id="join-community">
                <!-- benefits/advantages when a user is registered -->
                <h2>Rejoignez la communauté</h2>
                <!-- first advantage -->
                <div>
                    <article>
                        {# <h3>Apportez votre contribution</h3> #}
                        <!-- small text explanation-->
                        {# <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Itaque, aperiam.</p> #}
                        <figure id="itinerary-phone" class="div-hidden div-from-right">
                            <img src="img-source/phone-itinerary6.webp" alt="Description deuxième avantage">
                        </figure>
                        
                    </article>
                    <div id="blur-bcg" class="top"></div>
                    <!-- second advantage -->
                    <article>
                        {# <h3>Personnalisez votre itinéraire</h3>
                        <!-- small text explanation-->
                        <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Itaque, aperiam.</p> #}
                        <figure id="reviews-phone"  class="div-hidden div-from-left">
                            <img src="img-source/phone-review-pic.webp" alt="Description premier avantage">
                        </figure>
                        
                    </article>
                    <div id="blur-bcg" class="middle"></div>
                    <!-- third advantage -->
                    <article>
                        {# <h3>Et le dernier avantage</h3>
                        <!-- small text explanation-->
                        <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Itaque, aperiam.</p> #}
                        <figure id="share-posts"  class="div-hidden div-from-right">
                            <img src="img-source/share-posts.webp" alt="Description troisième avantage">
                        </figure>
                    </article>
                    <div id="blur-bcg" class="bottom"></div>
                </div>
            </section>
        </div>
  
  <!-- ================================ SHARE EXPERIENCE SECTION ================================ -->
        <div class="bcg-share" aria-label="Photographie représentant les vignes Alsaciennes">
            <section id="share-experience">
                <article>
                    <figure class="straight-stork">
                        <img src="img-source/looking-straight-stork.webp" alt="Illustration représentant une cigogne, avec un corps noir et blanc. Son bec est long et de couleur orange vif, tout comme ses pattes. Elle est tournée vers la droite et regarde légèrement vers le bas" >
                    </figure>
                    <div class="share-message">
                        <h3>Partagez vos expériences...</h3>
                        <figure>
                            <img src="img-source/left-speech-bubble.webp" alt="Illustration représentant une bulle de discussion, de couleur blanche, orientée à gauche">
                        </figure>
                    
                        <figure class="standing-stork">
                            <img src="img-source/stork-looking-up.webp" alt="Illustration représentant une cigogne, avec un corps noir et blanc. Son bec est long et de couleur orange vif, tout comme ses pattes. Elle est tournée vers la gauche et regarde en l'air">
                        </figure>
                        <h3>...et découvrez celles des autres</h3>
                        <figure>
                            <img src="img-source/right-speech-bubble.webp" alt="Illustration représentant une bulle de discussion, de couleur blanche, orientée à droite">
                        </figure>
                    </div>

                    <div>
                        <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sed, odio.</p>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Praesentium, officiis.</p>
                    </div>
                    <div class="socials">
                        <i class="fa-brands fa-facebook"></i>
                        <i class="fa-brands fa-instagram"></i>
                        <i class="fa-brands fa-x-twitter"></i>
                    </div>
                </article>
                <aside>
                    <figure><img src="#" alt="Description de la première illustration"></figure>
                    <figure><img src="#" alt="Description de la deuxième illustration"></figure>
                    <figure><img src="#" alt="Description de la troisième illustration"></figure>
                </aside>
            </section>
        </div>
    </main>

    {% block javascripts %}
        <script>

    document.addEventListener('DOMContentLoaded', function() {
        // setTimeout(function() {
            document.querySelector('.main-picture-bcg').classList.add('show');
        // }, 500); // Delai
    });

    document.addEventListener('DOMContentLoaded', function () {
        const section = document.getElementById('join-community');
        const divs = document.querySelectorAll('.div-hidden');
        let lastScrollTop = 0;

        // Observer pour les divs
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && entry.boundingClientRect.top > 0) { // Défilement vers le bas
                    entry.target.classList.add('div-visible');
                    entry.target.classList.remove('div-from-left', 'div-from-right'); // Retire les classes de position initiale
                    observer.unobserve(entry.target); // Arrête l'observation après l'animation
                }
            });
        }, {
            // rootMargin: '0px',
            rootMargin: '0px 0px -10% 0px',
            threshold: 0.6
        });

        // Fonction pour réinitialiser les animations
        const resetAnimations = () => {
            divs.forEach(div => {
                div.classList.remove('div-visible');
                if (!div.classList.contains('div-from-left') && !div.classList.contains('div-from-right')) {
                    if (div.classList.contains('div-hidden')) {
                        div.classList.add('div-from-left'); // Ajoute par défaut la classe si aucune des deux n'est présente
                    }
                }
                // Réactive l'observation pour réanimer lors du défilement vers le bas
                observer.observe(div);
            });
        };

        // Observe la direction du défilement et réinitialiser les animations si nécessaire
        window.addEventListener('scroll', () => {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

            if (scrollTop < lastScrollTop && scrollTop < section.offsetTop) { // Défilement vers le haut au-dessus de la section
                resetAnimations();
            }

            lastScrollTop = scrollTop;
        });

        // Active l'observation initiale des divs
        divs.forEach(div => observer.observe(div));
    });

            
    document.addEventListener('DOMContentLoaded', function(){
        const swiper = new Swiper('.swiper', {
                loop: true,
                slidesPerView: 3,
                });
    });
</script>
        <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    {% endblock %}
{% endblock %}
