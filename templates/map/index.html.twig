{% extends 'base.html.twig' %}
{% block title %}Map{% endblock %}
{% block body %}
    {% block stylesheets %}
        <link rel="stylesheet" href="{{ asset('css/map.css')}}">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
            integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
            crossorigin=""/>
    {% endblock %}
    <main>
        <section>
            <aside>
                <div id='places-container'>
                    {% for place in places %}
                        <div id="{{place.id}}">
                            <h2>{{place.name}}</h2>
                            <div>{{ place.averageRating|round(1, 'floor')|stars|raw }}({{ place.ratings|length}})
                                <a href="{{ path('show_place', {'id': place.id}) }}">Détails et avis</a>
                            </div>
                            <p>{{ place.type }}</p>
                            <p>Adresse : {{ place.address }}, {{ place.zipcode }} {{ place.city }}</p>
                            <div class="place-img">
                                {% for image in place.images %}
                                    <figure>
                                        <img src="{{ asset('images/place/') ~ image }}" alt="{{ place.name }}">
                                    </figure>
                                {% endfor %}
                            </div>
                            {# <button id="hide-button">Masquer</button> #}
                            <p class="border"></p>
                        </div>
                    {% endfor %}
                </div>
            </aside>    
            <div id="map"></div>
        </section>    
    </main>
    {% block javascripts %}
        <script src="https://kit.fontawesome.com/d004286c36.js" crossorigin="anonymous"></script>
        <script>window.placesData = JSON.parse("{{ placesData|e('js') }}") || [];</script>
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
                integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
                crossorigin=""></script>
        {# defer pour que le script soit chargé après le contenu de la page #}
        <script src="{{ asset('js/map.js')}}"></script>
    {% endblock %}
{% endblock %}
