{% extends 'base.html.twig' %}

{% block title %}Détails d'un lieu{% endblock %}

{% block body %}
    <main>
        <section>
            <h1>{{ place.name }}</h1>
            <div>
                <h2>Localisation</h2>
                <p>Adresse : {{ place.address }}</p>
                <p>Commune : {{ place.city }}</p>
                <p>Code Postal : {{ place.zipcode }}</p>
            </div>
            <div>
                <h2>Contact</h2>
                <p>Horaires d'ouverture :{{ place.openingHours }}</p>
                {# <p>Site web : {{ place.website }}</p> #}
                <p>
                    Site web :
                    {% if place.website %}
                        <a href="{{ place.website }}" target="_blank">{{ place.website }}</a>
                    {% else %}
                        Pas de site web
                    {% endif %}
                </p>        
                <p>Téléphone : {{ place.phoneNumber }}</p>
            </div>
            <div>
                <h2>Catégorie</h2>
                <p>Type : {{ place.type }}</p>
                <p>Thème :
                    {% for theme in place.themes %}
                        {{ theme }}
                    {% endfor %}
                </p>
                <p>Companion :
                    {% for companion in place.companions %}
                        {{ companion }}
                    {% endfor %}
                </p>
                <p>Description : {{ place.description }}</p>
            </div>
            {% for rating in place.ratings %}
                <div class="rating-stars" data-rating="{{ rating.rating }}"></div>
                <p>{{ rating.comment }}</p>
            {% endfor %}

        
            {% for image in place.images %}
                <figure>
                    <img src="{{ asset('images/place/') ~ image.name }}" alt="{{ place.name }}" width="150">
                </figure>
            {% endfor %}

            {# A modifier pour réserver à l'Admin #}
            <a href="{{ path('edit_place', {'id' : place.id})}}">Modifier ce lieu</a>
            <a href="{{ path('delete_place', {'id' : place.id})}}">Supprimer ce lieu</a>
        </section>
    </main>
    {# {{dump(place.images)}} #}
    
    {% block javascripts %}
                 <!-- important mandatory libraries -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/js/star-rating.min.js" type="text/javascript"></script>

    <!-- with v4.1.0 Krajee SVG theme is used as default (and must be loaded as below) - include any of the other theme JS files as mentioned below (and change the theme property of the plugin) -->
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/themes/krajee-svg/theme.js"></script>
    <script>$(document).ready(function() {
        $('.rating-stars').each(function(){
            var rating = $(this).data('rating');
            $(this).rating({
            readonly:true,
            showClear:false,
            showCaption:false,
            size:'sm',
            step:1,
            min:1,
            max:5
        }).rating('update', rating);
    });
    });
    </script>
    {% endblock %}
{% endblock %}
